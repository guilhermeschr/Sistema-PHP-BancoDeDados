CREATE SCHEMA MERCADO; 

CREATE TABLE MERCADO.TBCATEGORIA ( 
    CATCODIGO SERIAL NOT NULL, 
    CATDESCRICAO VARCHAR (50) NOT NULL, 
    CONSTRAINT PK_TBCATEGORIA 
    PRIMARY KEY (CATCODIGO) 
); 

CREATE TABLE MERCADO.TBCIDADE ( 
    CIDCODIGO SERIAL NOT NULL, 
    CIDNOME VARCHAR(100) NOT NULL, 
    CONSTRAINT PK_TBCIDADE 
    PRIMARY KEY (CIDCODIGO) 
); 

CREATE TABLE MERCADO.TBFORNECEDOR ( 
    FORcodigo SERIAL NOT NULL, 
    FORnome VARCHAR (50) NOT NULL, 
    FORCnpj VARCHAR (18) NOT NULL, 
    CIDCODIGO INTEGER NOT NULL, 
    CONSTRAINT PK_TBFORNECEDOR 
    PRIMARY KEY (FORCODIGO), 
    CONSTRAINT IDX_UNIQUE_FORCnpj 
    UNIQUE(FORCnpj), 
    CONSTRAINT "FK TBFORNECEDOR -> CIDADE" 
    FOREIGN KEY (CIDCODIGO) 
    REFERENCES MERCADO.TBCIDADE(CIDCODIGO) 
); 

CREATE TABLE MERCADO.TBPRODUTO ( 
    PROCodigo SERIAL NOT NULL, 
    PRONome VARCHAR(25) NOT NULL, 
    PRODescricao VARCHAR(100) NOT NULL, 
    PROValor NUMERIC (6,2) NOT NULL, 
    PROEstoque INTEGER NOT NULL, 
    CATCodigo INTEGER NOT NULL, 
    FORCodigo INTEGER NOT NULL, 
    CONSTRAINT CHECK_PROVALOR 
    CHECK(PROVALOR >= 0), 
    CONSTRAINT CHECK_PROESTOQUE 
    CHECK(PROEstoque >= 0), 
    CONSTRAINT PK_TBPRODUTO 
    PRIMARY KEY (PROCodigo), 
    CONSTRAINT "FK TBPRODUTO -> TBCATEGORIA" 
    FOREIGN KEY (CATCodigo) 
    REFERENCES MERCADO.TBCATEGORIA(CATCodigo), 
    CONSTRAINT "FK TBPRODUTO -> TBFORNECEDOR" 
    FOREIGN KEY (FORCodigo) 
    REFERENCES MERCADO.TBFORNECEDOR(FORCodigo) 
); 

CREATE TABLE MERCADO.TBCLIENTE ( 
    CLIcodigo SERIAL NOT NULL, 
    CLInome VARCHAR (50) NOT NULL, 
    CLICpf VARCHAR (14) NOT NULL, 
    CIDCODIGO INTEGER NOT NULL, 
    CONSTRAINT PK_TBCLIENTE 
    PRIMARY KEY (CLIcodigo), 
    CONSTRAINT IDX_UNIQUE_CLICpf 
    UNIQUE(CLICpf), 
    CONSTRAINT "FK CLIENTE -> CIDADE" 
    FOREIGN KEY (CIDCODIGO) 
    REFERENCES MERCADO.TBCIDADE(CIDCODIGO) 
); 

CREATE TABLE MERCADO.TBDEPARTAMENTO ( 
    DPTCODIGO SERIAL NOT NULL, 
    DPTDESCRICAO VARCHAR(30) NOT NULL, 
    CONSTRAINT PK_TBDEPARTAMENTO 
    PRIMARY KEY (DPTCODIGO) 
); 

CREATE TABLE MERCADO.TBFUNCIONARIO ( 
    FCNCODIGO SERIAL NOT NULL, 
    FCNNOME VARCHAR(50) NOT NULL, 
    DPTCODIGO INTEGER NOT NULL, 
    CONSTRAINT PK_TBFUNCIONARIO 
    PRIMARY KEY (FCNCODIGO), 
    CONSTRAINT "FK FUNCIONARIO -> DEPARTAMENTO" 
    FOREIGN KEY (DPTCODIGO) 
    REFERENCES MERCADO.TBDEPARTAMENTO(DPTCODIGO) 
); 